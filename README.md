# Setup Re for GitHub Actions

Github Action to setup the [Re build system](https://github.com/osdeverr/rebs).
Based off of [jwlawson/actions-setup-cmake](https://github.com/jwlawson/actions-setup-cmake) since I didn't want to deal with the details myself.

This action will update the path for your workflow to include Re matching the platform and version requirements.

To actually build projects with Re after setting it up, check out [osdeverr/actions-build-re-target](https://github.com/osdeverr/actions-build-re-target) and [osdeverr/actions-run-re-target](https://github.com/osdeverr/actions-run-re-target)!

### Usage

Adding a step that uses this action to your workflow will setup Re and make it available to subsequent steps:

```yaml
jobs:
  example:
    runs-on: ubuntu-latest
    
    steps:
    - name: Setup Re
      uses: osdeverr/actions-setup-re@v2
      with:
        re-version: '0.2.6'

    - name: Use Re
      run: re version
```

### Options

There are two options for the action:

* `re-version` controls the version of Re that is added to the path. This
  can be a fully specified verison `0.1.19`, partly specified `0.2`, a wildcard
  version `0.2.x`. By default it is empty which will give the latest Re
  version available on GitHub.

  The version can also be specified to be `latest` which is equivalent to
  leaving it blank and will give the latest version.

* `github-api-token` is optional, but is used to authenticate with GitHub's
  API. By default it will use the token generated by the workflow. If set to
  blank then no authentication is used to access the API and there is a chance
  that the test runner will have hit the API rate limit causing the action to
  fail to download the available versions from GitHub.

  See also:
   - [GitHub API rate limiting]
   - [GITHUB_TOKEN]

 * `setup-cmake` allows you to disable automatically setting up CMake in the workflow environment.
   This will speed up the run a little bit but will cause builds to fail if any of them include
   CMake projects or dependencies. `setup-cmake` is true by default.

### How it works

The action will download the list of releases of Re available on GitHub and
choose the best match for the test runner's platform and the version
requirements given as as option. The Re package is then either downloaded
from GitHub, or a cached version from the action's tool cache is used, and the
executables are provided on the path for subsequent workflow steps.


[GitHub API rate limiting]: https://developer.github.com/v3/#rate-limiting
[GITHUB_TOKEN]: https://help.github.com/en/actions/automating-your-workflow-with-github-actions/authenticating-with-the-github_token#about-the-github_token-secret


